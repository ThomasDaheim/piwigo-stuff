(function($){$.fn.dynamicImageMap=function(options){options||(options={});var mapElement,coords,parent,areas=options.areas,image=this;if(!options.areas&&!options.maps){try{areas=$('map[name='+image.attr("usemap").replace(/^#/,'')+'] area');}catch(e){throw new Error('The image tag("'+image.selector+'") is missing the usemap attribute');}}
image.wrap($("<div>",{class:$(image).data('class')||'',style:$(image).data('style')||''}));parent=image.parent();parent.css({position:'relative',display:'inline-block'});var setMapElemStyle=function(mapElement,coords){mapElement.css('position','absolute');coords=coords.split(',');switch(coords.length){case 3:mapElement.css({borderRadius:coords[2]*1,top:coords[1]-coords[2],left:coords[0]-coords[2],width:coords[2]*2,height:coords[2]*2});break;case 4:mapElement.css({top:coords[1]*1,left:coords[0]*1,width:coords[2]-coords[0],height:coords[3]-coords[1]});break;default:mapElement=null;break;}
return mapElement;}
if(areas){areas.map(function(i,n){mapElement=$("<a>",{class:$(n).data('class')||'',style:$(n).data('style')||'',html:$(n).data('content')||'',href:$(n).attr('href')||'#'});mapElement=setMapElemStyle(mapElement,n.coords);parent.append(mapElement);});}else{options.maps.forEach(function(n,i){mapElement=$("<a>",{class:n.classes||'',style:n.style||'',html:n.content||'',href:n.href||'#'});mapElement=setMapElemStyle(mapElement,n.coords);parent.append(mapElement);});}
return this;};}(window.jQuery));